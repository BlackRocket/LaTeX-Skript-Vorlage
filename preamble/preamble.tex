%----------------------------------
% laden der Verschiedenen Pakete
%----------------------------------

%========
% Schrift & Sprache
% Schriftsatz utf8 und Deutsch
\usepackage[utf8]{inputenc} % Schriftsatz utf8 verwenden 
\usepackage[T1]{fontenc} % T1-Fonts
\usepackage[ngerman]{babel} % Deutsche Sonderzeichen und Silbentrennung (neue Rechtschreibung)

% Schriftart (sie wird via Schalter ausgewählt)
\input{./preamble/fonts.tex}

% diverse Symbole
\usepackage{marvosym} 
\usepackage{wasysym}

% Mathematische Symbole
\usepackage{eulervm} % Mathematische Symbole

% einige Befehle brauchen pifont (Symbole)
\RequirePackage{pifont}

% franz. Anführungszeichen verwenden
\usepackage[babel,german=guillemets]{csquotes}

% erlaubt es Text zu drehen
\usepackage{rotating}

%========
% Layout Pakete
% behebt Makrogrenz-Problem
\usepackage{xspace}

% für Seitenränder, s.u.
\usepackage{geometry} 

% für Zeilenabstand
\usepackage{setspace}

% Berechnen von Längen und Werten
\usepackage{calc}

%\usepackage{microtype}

% Paket scrpage2 aus dem KOMA-Script-Paket ist für Kopf- und Fußzeilen zuständig.
\usepackage{scrpage2}

%========
% Tabellen
% bessere Tabellen
\usepackage{tabularx}

%Fussnoten innerhalb von Tabellen
\usepackage[para]{threeparttable}

% erlaubt Farbige Zellen
\usepackage{colortbl}

% alternierende farbige Tabellenzeilen
\usepackage[table]{xcolor}

% Gestaltung der horizontalen Linien innerhalb einer Tabelle
\usepackage{booktabs}

% wird von colortbl benötigt
\usepackage{array}

%========
% JURA spezifische Pakete
% Juristische Gliederungsebenen
\usepackage{alphanum}

% juristisches Literaturverzeichnis, Optionen mit \jurabibsetup
\usepackage{jurabib}

%Juristische Abk"urzungen (juramisc-B"undel)
\usepackage{jurabase}


%========
% andere Pakete

% Grafikpaket
\usepackage{graphicx}

% für hervor gehobene Boxen
\usepackage{tikz}
\usetikzlibrary{calc,arrows,shadings,shadows}
\newcommand\Loadedframemethod{tikz}
\usepackage[framemethod=\Loadedframemethod]{mdframed}

% Anpassbare Enumerates/Itemizes
\usepackage{enumitem}

% für Randnotizen (von den Randnummern verwendet)
\usepackage{marginnote}

% ermöglicht das anpassen der Titel
\usepackage{titlesec}

%----------------------------------
% Pakete mit Config
%----------------------------------


\usepackage[
   % Farben fuer die Links
   colorlinks=true,         % Links erhalten Farben statt Kaeten
   urlcolor=pdfurlcolor,    % \href{...}{...} external (URL)
   filecolor=pdffilecolor,  % \href{...} local file
   linkcolor=pdflinkcolor,  % \ref{...} and \pageref{...}
   citecolor=black,
   menucolor=black,
   % Links
   raiselinks=true,			% calculate real height of the link
   backref=false,           % Backlinks im Literaturverzeichnis (section, slide, page, none)
   pagebackref=false,       % Backlinks im Literaturverzeichnis mit Seitenangabe
   verbose,
   hyperindex=true,         % backlinkex index
   linktocpage=true,        % Inhaltsverzeichnis verlinkt Seiten
   hyperfootnotes=true,     % Keine Links auf Fussnoten
   % Bookmarks
   bookmarks=false,         % Erzeugung von Bookmarks fuer PDF-Viewer, deaktiviert da Bug von alphanum Probleme verursacht und die Lösung noch nicht wirklich funktioniert
   bookmarksopenlevel=1,    % Gliederungstiefe der Bookmarks
   bookmarksopen=true,      % Expandierte Untermenues in Bookmarks
   bookmarksnumbered=true,  % Nummerierung der Bookmarks
   bookmarkstype=toc,       % Art der Verzeichnisses
   bookmarksdepth=3,
   % Anchors
   plainpages=false,        % Anchors even on plain pages ?
   pageanchor=true,         % Pages are linkable
   % PDF Informationen
   pdftitle={},             % Titel
   pdfauthor={},            % Autor
   pdfcreator={LaTeX, hyperref, KOMA-Script}, % Ersteller
   %pdfproducer={pdfeTeX 1.10b-2.1} %Produzent
   pdfstartview=FitH,       % Dokument wird Fit Width geaefnet
   pdfpagemode=UseOutlines, % Bookmarks im Viewer anzeigen
   pdfpagelabels=true,      % set PDF page labels
]{hyperref}

% URL Paket (darf erst nach hyperref geladen werden
\usepackage{url} 

%----------------------------------
% Config
%----------------------------------
% ========
% Layout
% Optionen für das geometry-Paket. 
% Rand links 2,5cm, rechts 2,5cm, oben 3cm, unten 3cm.
\geometry{lmargin=25mm,rmargin=2.5cm,tmargin=30mm,bmargin=30mm,headheight=0ex}

% Hurenkinder und Schusterjungen/Waisenkinder unterdrücken
\clubpenalty = 1000
\widowpenalty = 1000
\displaywidowpenalty = 1000

\pagestyle{scrplain}

% Die Kopfzeile innen/links (\ihead) und in der Mitte (\chead) leer lassen, außen/rechts (\ohead) die Seitennummer
\ihead[]{} \chead[]{} \ohead[\thepage]{\thepage}

% Die Fußzeile leer lassen.
\ifoot{} \cfoot[]{} \ofoot{}

% Absätze nicht einrücken
\setlength{\parindent}{0pt}

% mdframed Global Config
\mdfsetup{skipabove=\topskip,skipbelow=\topskip}

% durch die boxes.tex werden verschiedene Boxen bereit gestellt
\input{./preamble/boxes.tex}


% Abstand vor und nach chapter verkleinern
\renewcommand*\chapterheadstartvskip{\vspace*{-1cm}} 
\renewcommand*{\chapterheadendvskip}{\vspace*{5mm}}

% neuer Tabellenspaltentyp D (X zentriert)
\newcolumntype{D}{>{\centering\arraybackslash}X}

% neuer Spaltentyp für Tabellen
\newcolumntype{C}[1]{>{\centering}p{#1}}

% für lange Zitate
\newenvironment{bquote}% 
   {\begin{quotation}\small}% 
   {\end{quotation}}% 
\SetBlockEnvironment{bquote}

% für kurze Zitate
\newenvironment{squote}% 
   {\begin{quote}\small}% 
   {\end{quote}}% 
\SetBlockEnvironment{squote}

% \part angepasst
\titleformat{\part}[display]{\normalfont\bfseries\LARGE\filcenter}{}{.5em}{}

% durch die table.tex wird eine Tabelle
\input{./preamble/table.tex}

%fuer URL (nur wenn url geladen ist)
\IfDefined{urlstyle}{
	\urlstyle{tt} % URLs in Typewriter
}

% Makro für Auflistungen
% Benutzung: \begin{Auflistung}
% \item Item 1
% \item Item 2
% \end{Auflistung}
\newenvironment{Auflistung}
{\begin{itemize}[parsep=0.2em,leftmargin=*]}
{\end{itemize}}

% Makro für Aufzählungen
% Benutzung:
% \begin{Aufzaehlung}
% \item Item 1
% \item Item 2
% \end{Aufzaehlung}
\newenvironment{Aufzaehlung}
{\begin{enumerate}[parsep=0.2em,leftmargin=*]}
{\end{enumerate}}

% ========
% Farben 
% Farbe der Ueberschriften
\definecolor{sectioncolor}{RGB}{0, 0, 0}    % Schwarz
%
% Farben
\definecolor{textcolor}{RGB}{0, 0, 0}        % Schwarz
\definecolor{darkgreen}{RGB}{0,100,0}		 % Dunkelgrün
\definecolor{darkred}{RGB}{139,0,0}			 % Dunkelrot
\definecolor{grey97}{RGB}{247,247,247}		 % grey97
\definecolor{darkgrey}{RGB}{64,64,64}		 % grey97
\definecolor{blau1}{RGB}{135,206,250}		 % Helles Blau
\definecolor{blau2}{rgb}{0.1,0.1,0.25}		 % Dunkleres Blau (alt: 0.5)
\definecolor{orange}{rgb}{1,0.39,0.04}
\definecolor{hellgelb}{rgb}{1.0,1.0,0.9}
\definecolor{hellblau}{rgb}{0.85,0.95,1.0}
\definecolor{dunkelgrau}{gray}{0.35}
\definecolor{mittelgrau}{gray}{0.85}
\definecolor{hellgrau}{gray}{0.93}
\definecolor{link}{rgb}{0.7,0.28,0.0}
%
% Farbe fuer grau hinterlegte Boxen (fuer Paket framed.sty)
\definecolor{shadecolor}{gray}{0.90}

% Farben fuer die Links im PDF
\definecolor{pdfurlcolor}{rgb}{0.6,0,0}
\definecolor{pdffilecolor}{rgb}{0,0,0}
\definecolor{pdflinkcolor}{rgb}{0,0,0}
 
% Farben fuer Listings
\colorlet{stringcolor}{green!40!black!100}
\colorlet{commencolor}{blue!0!black!100}
\definecolor{hellgelb}{rgb}{1,1,0.8}
\definecolor{colKeys}{rgb}{0,0,1}
\definecolor{colIdentifier}{rgb}{0,0,0}
\definecolor{colComments}{rgb}{1,0,0}
\definecolor{colString}{rgb}{0,0.5,0}


% ========
% Bibliographie und Fußnoten

% Konfiguriert das jurabib-Paket. Kommentare aus der Dokumentation
\jurabibsetup{%
	authorformat=italic, 		% Autor kursiv
	titleformat={commasep,all},	% Komma zwischen Autor/Bearbeiter und Titel im Zitat;
	annotatorformat=italic, 	% Bearbeiter kursiv
	annotatorlastsep=divis, 	% Bearbeiter nach Bindestrich
	commabeforerest, 			% Komma nach Verfasser (vor dem Rest)
	crossref={long,dynamic}, 	% Lange Querverweise (auf Festschriften etwa)
	howcited=compare, 			%"zitiert als...", wenn shorttitle anders als title
	pages={always,test}, 		% zitierten Seitenbereich immer ausgeben (always),
	bibformat={tabular,ibidem},	% Litverz. tabellarisch, mit der-/dieselbe
	lookforgender, 				% Auf das gender-Feld achten, um ders./dies. Zitate zu ermglichen
	superscriptedition=switch, 	% Hochgestellte Auflage, wenn ssedition=1 in .bib
	dotafter=bibentry, 			% Punkt nach jedem Eintrag im Lit.verzeichnis
}

\citetitlefortype{article,periodical,incollection} % Diese immer mit Titel zitieren
\formatpages[~]{article}{(}{)} % Zeitschriften als JZ 2001, 1057, (S.) %[, ]
\formatpages[~]{incollection}{(}{)} % Sammbelbandbeiträge als FS xy, 1057, (S.) %[, ]

%Bei Festschriften und Zeitschriftenartikeln: "`in"' vor Titel der Sammlung
\renewcommand{\bibjtsep}{In: } 
\renewcommand{\bibbtsep}{In: } 

%Bei Periodika (AcP et.al.) die Jahreszahl in runde (statt eckige) Klammern setzen.
\renewcommand*{\bibpldelim}{(}
\renewcommand*{\bibprdelim}{)}

%Linke Spalte des Lit.verz. soll ein Drittel der ges. Textbreite einnehmen
\renewcommand*{\bibleftcolumn}{\textwidth/3}

%Nicht Punkt, sondern Komma nach Auflage
\DeclareRobustCommand{\jbaensep}{,}

%Bei Artikeln: Heft-Nummer in Klammern hinter dem Erscheinungsjahr, etwa 2002(7). (aus jurabib-Gruppe)
\DeclareRobustCommand{\artnumberformat}[1]{(#1)}

%Kein Komma hinter Zeitschriftenname (aus: jurabib-Gruppe #661)
\AddTo\bibsgerman{\def\ajtsep{}}

% Keine hochgestellten Ziffern in der Fussnote (KOMA-Script-spezifisch):
\deffootnote{1.5em}{1em}{\makebox[1.5em][l]{\thefootnotemark}}

% Abstand Text <-> Fussnote
\addtolength{\skip\footins}{\baselineskip}

% Verhindert das Fortsetzen von Fussnoten auf der gegenüberligenden Seite
\interfootnotelinepenalty=10000 


% ========
% ANDERES
% durch die jura.tex werden verschiedene spezielle Jura Funktionen bereit gestellt
\input{./preamble/jura.tex}

% Bugfix für alphanum i.V.m. hyperref bookmarks=true
% Leider noch nicht funktionstüchtig
\AtBeginDocument{%
\renewcommand*\theHlvla{\arabic{lvla}}%
\renewcommand*\theHlvlb{\theHlvla.\arabic{lvlb}}%
\renewcommand*\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvlc}}}%
\renewcommand*\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvld}}}}%
\renewcommand*\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvle}}}}}%
\renewcommand*\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\Alph{lvlf}}}}}}%
\renewcommand*\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\Alph{lvlg}}}}}}}%
\renewcommand*\theHlvlh{\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvlh}}}}}}}}%
\renewcommand*\theHlvli{\theHlvlh{\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvli}}}}}}}}}%
\renewcommand*\theHlvlj{\theHlvli{\theHlvlh{\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\arabic{lvlj}}}}}}}}}}%
\renewcommand*\theHlvlk{\theHlvlj{\theHlvli{\theHlvlh{\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\Alph{lvlk}}}}}}}}}}}%
\renewcommand*\theHlvll{\theHlvlk{\theHlvlj{\theHlvli{\theHlvlh{\theHlvlg{\theHlvlf{\theHlvle{\theHlvld{\theHlvlc{\theHlvlb{\theHlvla.\Alph{lvll}}}}}}}}}}}}%
}